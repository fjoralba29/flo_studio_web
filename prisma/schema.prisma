datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

enum UserType {
  User
  Admin
}


model User {
  id        Int         @id @default(autoincrement())
  name      String
  email     String      @unique
  phone     String?
  password  String
  type      UserType    @default(User)
  events    UserEvent[]
  createdAt DateTime    @default(now())
}

model Event {
  id        Int         @id @default(autoincrement())
  name      String
  users     UserEvent[]
  createdAt DateTime    @default(now())
}

model UserEvent {
  id        Int      @id @default(autoincrement())
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  event     Event    @relation(fields: [eventId], references: [id])
  eventId   Int
  photos    Photo[] // photos/links uploaded for this user-event
  urls      String[]
  createdAt DateTime @default(now())
}

model Photo {
  id          Int        @id @default(autoincrement())
  title       String?
  description String?
  url         String // Cloudinary URL
  category    Category?  @relation(fields: [categoryId], references: [id])
  categoryId  Int?
  userEvent   UserEvent? @relation(fields: [userEventId], references: [id])
  userEventId Int?
  createdAt   DateTime   @default(now())
}

model Category {
  id           Int          @id @default(autoincrement())
  name         String
  description  String?
  primaryPhoto String? // URL to Cloudinary
  type         CategoryType
  photos       Photo[] // all photos added for this category
  createdAt    DateTime     @default(now())
}

enum CategoryType {
  Collaboration
  Category
  Wedding
}

model Service {
  id          Int      @id @default(autoincrement())
  name        String
  description String?
  createdAt   DateTime @default(now())
}

model WeddingPackage {
  id          Int           @id @default(autoincrement())
  name        String
  description String?
  items       PackageItem[] @relation("PackageItems")
  createdAt   DateTime      @default(now())
}

model PackageItem {
  id              Int              @id @default(autoincrement())
  name            String
  description     String?
  weddingPackages WeddingPackage[] @relation("PackageItems")
  createdAt       DateTime         @default(now())
}

model Video {
  id        Int      @id @default(autoincrement())
  title     String
  url       String
  createdAt DateTime @default(now())
}